!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var n=t("object"==typeof exports?require("react"):e.react);for(var s in n)("object"==typeof exports?exports:e)[s]=n[s]}}(this,function(e){return function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestions=t.Entries=void 0;var s=n(2),i=n(4),r=n(5);t["default"]=i.EntryInput,t.Entries=r.Entries,t.Suggestions=s.Suggestions},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestions=void 0;var u=n(3),l=s(u),p=t.Suggestions=function(e){function t(e,n){i(this,t);var s=r(this,Object.getPrototypeOf(t).call(this,e,n));return s.highlight=s.highlight.bind(s),s.hoverListeners={},s}return o(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.suggestions&&e.suggestions.size>0?e.suggestions.map(function(n){t.hoverListeners[n.get(t.props.idVariable)]=function(){return e.handleHover(n,!1)}}):this.hoverListeners={},e.suggestions&&!e.activeSuggestion){var n=1===e.suggestions.size?e.suggestions.first():e.suggestions.filter(function(t){return t.get(e.nameVariable)===e.query}).first();n&&this.hoverListeners[n.get(this.props.idVariable)]()}}},{key:"highlight",value:function(e){var t=e.toLowerCase().indexOf(this.props.query.toLowerCase());return l["default"].createElement("span",null,e.substr(0,t),l["default"].createElement("mark",null,e.substr(t,this.props.query.length)),e.substr(t+this.props.query.length))}},{key:"render",value:function(){var e=this;return!this.props.displaySuggestions||this.props.query.length<this.props.minQueryLength||!this.props.suggestions||0===this.props.suggestions.size?null:l["default"].createElement("div",{className:this.props.className},l["default"].createElement("ul",null,this.props.suggestions.valueSeq().map(function(t,n){return l["default"].createElement("li",{className:e.props.activeSuggestion&&e.props.activeSuggestion===t?"active":"default",key:n,onClick:e.props.handleClick,onMouseOut:e.props.handleOut,onMouseOver:e.hoverListeners[t.get(e.props.idVariable)]},e.highlight(t.get(e.props.nameVariable)))})))}}]),t}(l["default"].Component);p.propTypes={activeSuggestion:l["default"].PropTypes.object,className:l["default"].PropTypes.string,displaySuggestions:l["default"].PropTypes.bool,handleClick:l["default"].PropTypes.func,handleHover:l["default"].PropTypes.func.isRequired,handleOut:l["default"].PropTypes.func.isRequired,idVariable:l["default"].PropTypes.string,minQueryLength:l["default"].PropTypes.number,nameVariable:l["default"].PropTypes.string,query:l["default"].PropTypes.string,suggestions:l["default"].PropTypes.object},p.defaultProps={className:"suggestions",displaySuggestions:!0,idVariable:"id",nameVariable:"name"}},function(t,n){t.exports=e},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EntryInput=void 0;var u=n(3),l=s(u),p=n(2),c=n(5),g=t.EntryInput=function(e){function t(e,n){i(this,t);var s=r(this,Object.getPrototypeOf(t).call(this,e,n));return s.handleDelete=s.handleDelete.bind(s),s.handleAddition=s.handleAddition.bind(s),s.handleChange=s.handleChange.bind(s),s.handleKeyDown=s.handleKeyDown.bind(s),s.handleFocus=s.handleFocus.bind(s),s.handleBlur=s.handleBlur.bind(s),s.updateSuggestions=s.updateSuggestions.bind(s),s.handleSuggestionClick=s.handleSuggestionClick.bind(s),s.handleSuggestionHover=s.handleSuggestionHover.bind(s),s.handleSuggestionOut=s.handleSuggestionOut.bind(s),s._input=function(e){return s.input=e},s._suggestions=function(e){return s.suggestions=e},s.state={query:"",activeSuggestion:null,displaySuggestions:!1,suggestions:null},s}return o(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){(e.suggestions!==this.props.suggestions||e.entries!==this.props.entries||t.query!==this.state.query||t.activeSuggestion!==this.state.activeSuggestion)&&this.updateSuggestions()}},{key:"handleChange",value:function(e){var t=e.target.value.trim();this.setState({query:t,activeSuggestion:null,displaySuggestions:!0})}},{key:"handleFocus",value:function(){this.setState({displaySuggestions:!0})}},{key:"handleBlur",value:function(){this.state.activeSuggestion||this.setState({displaySuggestions:!1})}},{key:"handleKeyDown",value:function(e){var t=0,n=this.state.activeSuggestion?this.state.suggestions.indexOf(this.state.activeSuggestion):null;if(27===e.keyCode)this.setState({query:"",displaySuggestions:!1});else if(38===e.keyCode)this.state.activeSuggestion&&(t=0===n?this.state.suggestions.size-1:n-1),this.suggestions.hoverListeners[this.state.suggestions.get(t).get(this.props.idVariable)](!0);else if(40===e.keyCode)this.state.activeSuggestion&&(t=n===this.state.suggestions.size-1?0:n+1),this.suggestions.hoverListeners[this.state.suggestions.get(t).get(this.props.idVariable)](!0);else{if(!(this.state.activeSuggestion&&this.props.newTagOn.indexOf(e.keyCode)>=0))return;this.handleAddition(this.state.activeSuggestion)}e.preventDefault()}},{key:"handleAddition",value:function(e){this.setState({query:""}),(0===Object.keys(this.props.entries).length||-1===this.props.entries.indexOf(e))&&this.props.actionAddEntryToState(e),this.input.focus()}},{key:"handleDelete",value:function(e){this.props.actionRemoveEntryFromState(e),this.input.focus()}},{key:"handleSuggestionHover",value:function(e,t){this.setState({activeSuggestion:e,query:t?e.get(this.props.nameVariable):this.state.query})}},{key:"handleSuggestionOut",value:function(){this.setState({activeSuggestion:null})}},{key:"handleSuggestionClick",value:function(){this.state.activeSuggestion&&this.handleAddition(this.state.activeSuggestion)}},{key:"updateSuggestions",value:function(){var e=this;this.setState({suggestions:this.props.suggestions.filter(function(t){return-1!==t.get(e.props.nameVariable).toLowerCase().indexOf(e.state.query.toLowerCase())})})}},{key:"render",value:function(){return l["default"].createElement("div",null,l["default"].createElement("div",{className:"add-entries"},l["default"].createElement(c.Entries,{className:"entries",entries:this.props.entries,handleDelete:this.handleDelete}),l["default"].createElement("div",{className:"input"},l["default"].createElement("input",{onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:this.props.placeholder,ref:this._input,type:"text",value:this.state.query}),l["default"].createElement(p.Suggestions,{activeSuggestion:this.state.activeSuggestion,displaySuggestions:this.state.displaySuggestions,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover,handleOut:this.handleSuggestionOut,idVariable:this.props.idVariable,minQueryLength:this.props.minQueryLength,nameVariable:this.props.nameVariable,query:this.state.query,ref:this._suggestions,suggestions:this.state.suggestions}))))}}]),t}(l["default"].Component);g.propTypes={actionAddEntryToState:l["default"].PropTypes.func.isRequired,actionRemoveEntryFromState:l["default"].PropTypes.func.isRequired,entries:l["default"].PropTypes.object.isRequired,idVariable:l["default"].PropTypes.string,minQueryLength:l["default"].PropTypes.number,nameVariable:l["default"].PropTypes.string,newTagOn:l["default"].PropTypes.array,placeholder:l["default"].PropTypes.string,suggestions:l["default"].PropTypes.object.isRequired},g.defaultProps={minQueryLength:1,idVariable:"id",nameVariable:"name",newTagOn:[13,9],placeholder:"entries"}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Entries=void 0;var u=n(3),l=s(u),p=t.Entries=function(e){function t(e,n){return i(this,t),r(this,Object.getPrototypeOf(t).call(this,e,n))}return o(t,e),a(t,[{key:"handleDelete",value:function(e){var t=this;return function(){t.props.handleDelete(e)}}},{key:"render",value:function(){var e=this;return this.props.entries&&0!==Object.keys(this.props.entries).length?l["default"].createElement("div",{className:"entries"},this.props.entries.map(function(t){return l["default"].createElement("span",{className:"entry",key:t.get("id")},t.get(e.props.nameVariable),l["default"].createElement("button",{className:"icon-delete icon",onClick:e.handleDelete(t)}))})):null}}]),t}(l["default"].Component);p.propTypes={entries:l["default"].PropTypes.object,handleDelete:l["default"].PropTypes.func,nameVariable:l["default"].PropTypes.string},p.defaultProps={nameVariable:"name"}}])});