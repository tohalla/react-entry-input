!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var s=t("object"==typeof exports?require("react"):e.react);for(var n in s)("object"==typeof exports?exports:e)[n]=s[n]}}(this,function(e){return function(e){function t(n){if(s[n])return s[n].exports;var i=s[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){e.exports=s(1)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestions=t.Entries=void 0;var n=s(2),i=s(4),r=s(5);t["default"]=i.EntryInput,t.Entries=r.Entries,t.Suggestions=n.Suggestions},function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Suggestions=void 0;var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),u=s(3),l=n(u),p=t.Suggestions=function(e){function t(e,s){i(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e,s));return n.highlight=n.highlight.bind(n),n.hoverListeners={},n}return o(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.suggestions!==e.suggestions&&(e.suggestions&&e.suggestions.size>0?e.suggestions.map(function(s){t.hoverListeners[s.get(t.props.idVariable)]=function(){return e.handleHover(s,!1)}}):this.hoverListeners={},e.suggestions&&!e.activeSuggestion)){var s=1===e.suggestions.size?e.suggestions.first():e.suggestions.filter(function(t){return t.get(e.nameVariable)===e.query}).first();s&&this.hoverListeners[s.get(this.props.idVariable)]()}}},{key:"highlight",value:function(e){var t=e.toLowerCase().indexOf(this.props.query.toLowerCase());return l["default"].createElement("span",null,e.substr(0,t),l["default"].createElement("mark",null,e.substr(t,this.props.query.length)),e.substr(t+this.props.query.length))}},{key:"render",value:function(){var e=this;return!this.props.displaySuggestions||this.props.query.length<this.props.minQueryLength||!this.props.suggestions||0===this.props.suggestions.size?null:l["default"].createElement("div",{className:this.props.className},l["default"].createElement("ul",null,this.props.suggestions.valueSeq().map(function(t){return l["default"].createElement("li",{className:e.props.activeSuggestion&&e.props.activeSuggestion===t?"active":"default",key:t.get(e.props.idVariable),onClick:e.props.handleClick,onMouseOut:e.props.handleOut,onMouseOver:e.hoverListeners[t.get(e.props.idVariable)]},e.highlight(t.get(e.props.nameVariable)))})))}}]),t}(l["default"].Component);p.propTypes={activeSuggestion:l["default"].PropTypes.object,className:l["default"].PropTypes.string,displaySuggestions:l["default"].PropTypes.bool,handleClick:l["default"].PropTypes.func,handleHover:l["default"].PropTypes.func.isRequired,handleOut:l["default"].PropTypes.func.isRequired,idVariable:l["default"].PropTypes.string,minQueryLength:l["default"].PropTypes.number,nameVariable:l["default"].PropTypes.string,query:l["default"].PropTypes.string,suggestions:l["default"].PropTypes.object},p.defaultProps={className:"suggestions",displaySuggestions:!0,idVariable:"id",nameVariable:"name"}},function(t,s){t.exports=e},function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EntryInput=void 0;var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),u=s(3),l=n(u),p=s(2),d=s(5),g=t.EntryInput=function(e){function t(e,s){i(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e,s));return n.handleDelete=n.handleDelete.bind(n),n.handleAddition=n.handleAddition.bind(n),n.handleChange=n.handleChange.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.updateSuggestions=n.updateSuggestions.bind(n),n.handleSuggestionClick=n.handleSuggestionClick.bind(n),n.handleSuggestionHover=n.handleSuggestionHover.bind(n),n.handleSuggestionOut=n.handleSuggestionOut.bind(n),n._input=function(e){n.input=e},n._suggestions=function(e){n.suggestions=e},n.state={query:"",activeSuggestion:null,displaySuggestions:!1,suggestions:null},n}return o(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){(e.suggestions!==this.props.suggestions||e.entries!==this.props.entries||t.query!==this.state.query||t.activeSuggestion!==this.state.activeSuggestion)&&this.updateSuggestions()}},{key:"handleChange",value:function(e){var t=e.target.value.trim();this.setState({query:t,activeSuggestion:null,displaySuggestions:!0})}},{key:"handleFocus",value:function(){this.setState({displaySuggestions:!0})}},{key:"handleBlur",value:function(){this.state.activeSuggestion||this.setState({displaySuggestions:!1})}},{key:"handleKeyDown",value:function(e){var t=0,s=this.state.activeSuggestion?this.state.suggestions.indexOf(this.state.activeSuggestion):null;if(27===e.keyCode)this.setState({query:"",displaySuggestions:!1});else if(38===e.keyCode)this.state.activeSuggestion&&(t=0===s?this.state.suggestions.size-1:s-1),this.suggestions.hoverListeners[this.state.suggestions.get(t).get(this.props.idVariable)](!0);else if(40===e.keyCode)this.state.activeSuggestion&&(t=s===this.state.suggestions.size-1?0:s+1),this.suggestions.hoverListeners[this.state.suggestions.get(t).get(this.props.idVariable)](!0);else{if(!(this.state.activeSuggestion&&this.props.newTagOn.indexOf(e.keyCode)>=0))return;this.handleAddition(this.state.activeSuggestion)}e.preventDefault()}},{key:"handleAddition",value:function(e){0!==this.props.limitEntries&&this.props.limitEntries<=this.props.entries.size||(this.setState({query:""}),(0===Object.keys(this.props.entries).length||-1===this.props.entries.indexOf(e))&&this.props.actionAddEntryToState(e),this.input.focus())}},{key:"handleDelete",value:function(e){this.props.actionRemoveEntryFromState(e),this.input.focus()}},{key:"handleSuggestionHover",value:function(e,t){this.setState({activeSuggestion:e,query:t?e.get(this.props.nameVariable):this.state.query})}},{key:"handleSuggestionOut",value:function(){this.setState({activeSuggestion:null})}},{key:"handleSuggestionClick",value:function(){this.state.activeSuggestion&&this.handleAddition(this.state.activeSuggestion)}},{key:"updateSuggestions",value:function(){var e=this;this.setState({suggestions:this.props.suggestions.filter(function(t){return-1!==t.get(e.props.nameVariable).toLowerCase().indexOf(e.state.query.toLowerCase())&&!e.props.entries.includes(t)})})}},{key:"render",value:function(){return l["default"].createElement("div",{className:"add-entries"},this.props.hideEntries?null:l["default"].createElement(d.Entries,{className:"entries",deleteClasses:this.props.deleteClasses,deleteText:this.props.deleteText,entries:this.props.entries,handleDelete:this.handleDelete,idVariable:this.props.idVariable,nameVariable:this.props.nameVariable,textIfNoEntries:this.props.textIfNoEntries}),l["default"].createElement("div",{className:"input"},l["default"].createElement("input",{onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:this.props.placeholder,ref:this._input,type:0===this.props.limitEntries||!this.props.entries||this.props.limitEntries>this.props.entries.size?"text":"hidden",value:this.state.query}),l["default"].createElement(p.Suggestions,{activeSuggestion:this.state.activeSuggestion,displaySuggestions:this.state.displaySuggestions,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover,handleOut:this.handleSuggestionOut,idVariable:this.props.idVariable,minQueryLength:this.props.minQueryLength,nameVariable:this.props.nameVariable,query:this.state.query,ref:this._suggestions,suggestions:0===this.props.limitEntries||!this.props.entries||this.props.limitEntries>this.props.entries.size?this.state.suggestions:null})))}}]),t}(l["default"].Component);g.propTypes={actionAddEntryToState:l["default"].PropTypes.func.isRequired,actionRemoveEntryFromState:l["default"].PropTypes.func.isRequired,deleteClasses:l["default"].PropTypes.string,deleteText:l["default"].PropTypes.string,entries:l["default"].PropTypes.object.isRequired,hideEntries:l["default"].PropTypes.bool,idVariable:l["default"].PropTypes.string,limitEntries:l["default"].PropTypes.number,minQueryLength:l["default"].PropTypes.number,nameVariable:l["default"].PropTypes.string,newTagOn:l["default"].PropTypes.array,placeholder:l["default"].PropTypes.string,suggestions:l["default"].PropTypes.object.isRequired,textIfNoEntries:l["default"].PropTypes.string},g.defaultProps={deleteClasses:"delete-entry",deleteText:"x",hideEntries:!1,minQueryLength:1,idVariable:"id",limitEntries:0,nameVariable:"name",newTagOn:[13,9],placeholder:"entries"}},function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Entries=void 0;var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),u=s(3),l=n(u),p=t.Entries=function(e){function t(e,s){return i(this,t),r(this,Object.getPrototypeOf(t).call(this,e,s))}return o(t,e),a(t,[{key:"handleDelete",value:function(e){var t=this;return function(){t.props.handleDelete(e)}}},{key:"render",value:function(){var e=this;return this.props.entries&&0!==Object.keys(this.props.entries).length?l["default"].createElement("div",{className:"entries"},this.props.entries.map(function(t){return l["default"].createElement("span",{className:"entry",key:t.get(e.props.idVariable)},t.get(e.props.nameVariable),e.props.handleDelete?l["default"].createElement("button",{className:e.props.deleteClasses,onClick:e.handleDelete(t),type:"button"},e.props.deleteText):null)})):this.props.textIfNoEntries?l["default"].createElement("div",{className:"entries"},this.props.textIfNoEntries):null}}]),t}(l["default"].Component);p.propTypes={deleteClasses:l["default"].PropTypes.string,deleteText:l["default"].PropTypes.string,entries:l["default"].PropTypes.object,handleDelete:l["default"].PropTypes.func,idVariable:l["default"].PropTypes.string,nameVariable:l["default"].PropTypes.string,textIfNoEntries:l["default"].PropTypes.string},p.defaultProps={deleteClasses:"delete-entry",deleteText:"x",idVariable:"id",nameVariable:"name"}}])});